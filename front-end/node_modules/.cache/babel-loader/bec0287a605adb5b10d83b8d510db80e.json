{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/mystore/front-end/src/components/Product/ProductDetails.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport classes from \"./ProductDetails.module.css\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Rating from \"./Rating/Rating\";\nimport { useParams } from \"react-router-dom\";\nimport { productActionDetails, productCreateReviewAction } from \"../Actions/productActions\";\nimport Loader from \"../Layout/loader\";\nimport Message from \"../Layout/message\";\nimport { PRODUCT_RESET_REVIEW } from \"../Constants/productConstant\";\nimport ProductCard from \"./productCard\";\nimport LandingPage from \"../Layout/LandingPage\";\nimport Category from \"./Category\";\nimport Meta from \"../Layout/Meta\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ProductDetails() {\n  _s();\n\n  const [qty, setQuantity] = useState(1);\n  const [rating, setRating] = useState(0);\n  const [comment, setComment] = useState(\"\");\n  const {\n    id\n  } = useParams();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const productDetail = useSelector(state => state.productDetails);\n  const {\n    loading,\n    error,\n    product\n  } = productDetail;\n  console.log(product.reviews.length);\n  const userLogin = useSelector(state => state.userLogin);\n  const {\n    userInfo\n  } = userLogin;\n  const productReview = useSelector(state => state.createProductReview);\n  const {\n    loading: loadingReview,\n    error: errorReview,\n    success: successReview\n  } = productReview;\n  useEffect(() => {\n    dispatch(productActionDetails(id));\n  }, [dispatch, id, successReview]);\n\n  const QuantityChangeHandler = event => {\n    setQuantity(event.target.value);\n  };\n\n  const addToCartHandler = () => {\n    navigate(`/cart/${id}?qty=${qty}`);\n  };\n\n  function reviewSubmitHandler(event) {\n    event.preventDefault();\n    dispatch(productCreateReviewAction(id, {\n      rating,\n      comment\n    }));\n  }\n\n  return loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.container,\n    children: [/*#__PURE__*/_jsxDEV(Meta, {\n      title: product.name,\n      description: product.description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.items,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.detail,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.image,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: product.image,\n            alt: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.productDetail,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: classes.title,\n            children: [\" \", product.name, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Rating, {\n              value: product.rating,\n              text: `( ${product.numReviews} reviews )`,\n              color: classes.color\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \" Description : \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: product.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\" Brand : \", product.brand, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: classes.titlePrice,\n              children: [product.price, \"dh \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: classes.status,\n            children: product.countInStock ? /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\" in Stock : \", product.countInStock, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \" Out of Stock\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this), product.countInStock && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.quantity,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \" Quantity : \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              type: \"select\",\n              defaultValue: qty,\n              className: classes.selector,\n              onChange: QuantityChangeHandler,\n              children: [...Array(product.countInStock).keys()].map(numOfQuntitiy => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: numOfQuntitiy + 1,\n                children: numOfQuntitiy + 1\n              }, numOfQuntitiy + 1, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this), product.countInStock ? /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: classes.button,\n            onClick: addToCartHandler,\n            children: \"+ Add to card\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this) : \"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, product._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: classes.bigtitle,\n        children: \" Review & Feedback \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.reviewSection,\n        children: product.reviews.map(review => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.feedback,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\" \", review.name, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: \"yellow\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Rating, {\n              value: product.rating\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: review.comment\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), loadingReview ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }, this) : errorReview ? /*#__PURE__*/_jsxDEV(Message, {\n      message: error,\n      style: {\n        background: \"red\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.review,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: classes.bigtitle,\n        children: \" Feedback & Review \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: reviewSubmitHandler,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.formControl,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \" Rating \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            type: \"select\",\n            value: rating,\n            onChange: event => setRating(event.target.value),\n            className: classes.rating,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \" Select...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"1\",\n              children: \" Poor \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"2\",\n              children: \" Average \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"3\",\n              children: \" Not Bad \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"4\",\n              children: \" Good \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"5\",\n              children: \" Outstanding \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.formControl,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \" Feedback \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: classes.inputFeed,\n            type: \"text\",\n            value: comment,\n            onChange: event => setComment(event.target.value),\n            placeholder: \"Add New Review\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: classes.submit,\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Category, {\n      title: \"Products You May like\",\n      category: product.category\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ProductDetails, \"VNvCjB1TtQRoINQOcRgEALjLMXI=\", false, function () {\n  return [useParams, useDispatch, useNavigate, useSelector, useSelector, useSelector];\n});\n\n_c = ProductDetails;\nexport default ProductDetails; // const [product, setProduct] = useState([]);\n// const { id } = useParams();\n// const quantity = 1;\n// useEffect(() => {\n//   const fetchProductById = async () => {\n//     const { data } = await axios.get(`/api/product/${id}`);\n//     setProduct(data);\n//   };\n//   fetchProductById();\n// }, [id]);\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductDetails\");","map":{"version":3,"sources":["/Users/mac/Desktop/mystore/front-end/src/components/Product/ProductDetails.js"],"names":["React","useState","useEffect","Link","useNavigate","classes","useDispatch","useSelector","Rating","useParams","productActionDetails","productCreateReviewAction","Loader","Message","PRODUCT_RESET_REVIEW","ProductCard","LandingPage","Category","Meta","ProductDetails","qty","setQuantity","rating","setRating","comment","setComment","id","dispatch","navigate","productDetail","state","productDetails","loading","error","product","console","log","reviews","length","userLogin","userInfo","productReview","createProductReview","loadingReview","errorReview","success","successReview","QuantityChangeHandler","event","target","value","addToCartHandler","reviewSubmitHandler","preventDefault","container","name","description","items","detail","image","title","numReviews","color","brand","titlePrice","price","status","countInStock","quantity","selector","Array","keys","map","numOfQuntitiy","button","_id","bigtitle","reviewSection","review","feedback","background","formControl","inputFeed","submit","category"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport classes from \"./ProductDetails.module.css\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Rating from \"./Rating/Rating\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport {\r\n  productActionDetails,\r\n  productCreateReviewAction,\r\n} from \"../Actions/productActions\";\r\nimport Loader from \"../Layout/loader\";\r\nimport Message from \"../Layout/message\";\r\nimport { PRODUCT_RESET_REVIEW } from \"../Constants/productConstant\";\r\nimport ProductCard from \"./productCard\";\r\nimport LandingPage from \"../Layout/LandingPage\";\r\nimport Category from \"./Category\";\r\nimport Meta from \"../Layout/Meta\";\r\n\r\nfunction ProductDetails() {\r\n  const [qty, setQuantity] = useState(1);\r\n  const [rating, setRating] = useState(0);\r\n  const [comment, setComment] = useState(\"\");\r\n  const { id } = useParams();\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const productDetail = useSelector((state) => state.productDetails);\r\n  const { loading, error, product } = productDetail;\r\n\r\n  console.log(product.reviews.length);\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n\r\n  const { userInfo } = userLogin;\r\n\r\n  const productReview = useSelector((state) => state.createProductReview);\r\n  const {\r\n    loading: loadingReview,\r\n    error: errorReview,\r\n    success: successReview,\r\n  } = productReview;\r\n\r\n  useEffect(() => {\r\n    dispatch(productActionDetails(id));\r\n  }, [dispatch, id, successReview]);\r\n\r\n  const QuantityChangeHandler = (event) => {\r\n    setQuantity(event.target.value);\r\n  };\r\n\r\n  const addToCartHandler = () => {\r\n    navigate(`/cart/${id}?qty=${qty}`);\r\n  };\r\n\r\n  function reviewSubmitHandler(event) {\r\n    event.preventDefault();\r\n    dispatch(productCreateReviewAction(id, { rating, comment }));\r\n  }\r\n\r\n  return loading ? (\r\n    <Loader />\r\n  ) : (\r\n    <div className={classes.container}>\r\n      <Meta title={product.name} description={product.description} />\r\n      <div className={classes.items} key={product._id}>\r\n        <div className={classes.detail}>\r\n          <div className={classes.image}>\r\n            <img src={product.image} alt={product.name} />\r\n          </div>\r\n          <div className={classes.productDetail}>\r\n            <h2 className={classes.title}> {product.name} </h2>\r\n            <div>\r\n              <Rating\r\n                value={product.rating}\r\n                text={`( ${product.numReviews} reviews )`}\r\n                color={classes.color}\r\n              />\r\n            </div>\r\n            <h4> Description : </h4>\r\n            <p>{product.description}</p>\r\n            <p> Brand : {product.brand} </p>\r\n            <h1>\r\n              <span className={classes.titlePrice}>{product.price}dh </span>\r\n            </h1>\r\n            <span className={classes.status}>\r\n              {product.countInStock ? (\r\n                <p> in Stock : {product.countInStock} </p>\r\n              ) : (\r\n                <p> Out of Stock</p>\r\n              )}\r\n            </span>\r\n            {product.countInStock && (\r\n              <div className={classes.quantity}>\r\n                <span> Quantity : </span>\r\n                <select\r\n                  type=\"select\"\r\n                  defaultValue={qty}\r\n                  className={classes.selector}\r\n                  onChange={QuantityChangeHandler}\r\n                >\r\n                  {[...Array(product.countInStock).keys()].map(\r\n                    (numOfQuntitiy) => (\r\n                      <option key={numOfQuntitiy + 1} value={numOfQuntitiy + 1}>\r\n                        {numOfQuntitiy + 1}\r\n                      </option>\r\n                    )\r\n                  )}\r\n                </select>\r\n              </div>\r\n            )}\r\n            {product.countInStock ? (\r\n              <button\r\n                type=\"button\"\r\n                className={classes.button}\r\n                onClick={addToCartHandler}\r\n              >\r\n                + Add to card\r\n              </button>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Reviews */}\r\n      <div>\r\n        <h4 className={classes.bigtitle}> Review & Feedback </h4>\r\n        <div className={classes.reviewSection}>\r\n          {product.reviews.map((review) => (\r\n            <div className={classes.feedback}>\r\n              <h3> {review.name} </h3>\r\n              <span style={{ color: \"yellow\" }}>\r\n                <Rating value={product.rating} />\r\n              </span>\r\n              <p>{review.comment}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      {/* Adding reviews */}\r\n      {loadingReview ? (\r\n        <Loader />\r\n      ) : errorReview ? (\r\n        <Message message={error} style={{ background: \"red\" }} />\r\n      ) : (\r\n        <div className={classes.review}>\r\n          <h3 className={classes.bigtitle}> Feedback & Review </h3>\r\n          <form onSubmit={reviewSubmitHandler}>\r\n            <div className={classes.formControl}>\r\n              <label> Rating </label>\r\n              <select\r\n                type=\"select\"\r\n                value={rating}\r\n                onChange={(event) => setRating(event.target.value)}\r\n                className={classes.rating}\r\n              >\r\n                <option value=\"\"> Select...</option>\r\n                <option value=\"1\"> Poor </option>\r\n                <option value=\"2\"> Average </option>\r\n                <option value=\"3\"> Not Bad </option>\r\n                <option value=\"4\"> Good </option>\r\n                <option value=\"5\"> Outstanding </option>\r\n              </select>\r\n            </div>\r\n            <div className={classes.formControl}>\r\n              <label> Feedback </label>\r\n              <textarea\r\n                className={classes.inputFeed}\r\n                type=\"text\"\r\n                value={comment}\r\n                onChange={(event) => setComment(event.target.value)}\r\n                placeholder=\"Add New Review\"\r\n              ></textarea>\r\n            </div>\r\n            <button className={classes.submit}>Submit</button>\r\n          </form>\r\n        </div>\r\n      )}\r\n      <Category title=\"Products You May like\" category={product.category} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductDetails;\r\n\r\n// const [product, setProduct] = useState([]);\r\n// const { id } = useParams();\r\n// const quantity = 1;\r\n\r\n// useEffect(() => {\r\n//   const fetchProductById = async () => {\r\n//     const { data } = await axios.get(`/api/product/${id}`);\r\n//     setProduct(data);\r\n//   };\r\n//   fetchProductById();\r\n// }, [id]);\r\n"]},"metadata":{},"sourceType":"module"}